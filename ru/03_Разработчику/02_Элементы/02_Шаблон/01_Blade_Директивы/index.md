Blade – это простой, но мощный механизм создания шаблонов, который входит в состав Evolution CMS. В отличие от некоторых механизмов создания шаблонов PHP, Blade не ограничивает использование простого PHP кода в ваших шаблонах. На самом деле все шаблоны Blade скомпилированы в обычный PHP-код и хранятся в кэш-памяти, пока они не будут изменены, что означает, что Blade практически не добавляет накладных расходов для вашего приложения. Файлы шаблонов Blade используют `.blade.php` для расширения файла и обычно хранятся в `/views/` каталоге.

## Отображение данных

Вы можете отобразить данные, которые передаются в ваши представления Blade, вложив переменную в фигурные скобки. Например Вы можете отобразить содержимое переменной `name` так:

```blade
Привет, {{$name}}.
```

> **Примечание**  
> Эхо-выражения Blade `{{}}` автоматически посылаются через `htmlspecialchars` функцию PHP для предотвращения атак XSS.

Вы не ограничены только отображением содержимого переменных, переданных в представление. Вы можете также повторить результаты любой функции PHP. На самом деле, вы можете разместить любой PHP-код, который хотите, в оператор Blade echo:

```blade
Текущая отметка времени UNIX {{time()}}.
```

### Отображение неэкранированных данных

По умолчанию `{{}}` операторы Blade автоматически посылаются через `htmlspecialchars` функцию PHP для предотвращения XSS-атак. Если вы не хотите, чтобы ваши данные были экранированы, вы можете использовать такой синтаксис:

```blade
Здравствуйте, {!! $name !!}.
```

> **Внимание**  
> Будьте очень осторожны, воспроизводя содержимое, которое предоставляют пользователи вашего приложения. Обычно вы должны использовать экранированный синтаксис двойных фигурных скобок, чтобы предотвратить атаки XSS при отображении предоставленных пользователем данных.

### Blade и JavaScript

Поскольку многие фреймворки JavaScript также используют «фигурные» скобки, чтобы указать, что данное выражение должно отображаться в браузере, вы можете использовать символ `@` чтобы сообщить механизму воспроизведения Blade, что выражение должно остаться нетронутым. К примеру:

```blade
<h1>Evolution CMS</h1>

Привет @{{$name}}.
```

В этом примере @символ будет удален Blade, однако `{{ name }}` выражение останется нетронутым обработчиком Blade, позволяя его воспроизводить в вашей структуре JavaScript.

Символу `@` также можно использовать для экранирования директив Blade:

```blade
{{-- Blade шаблон --}}
@@if()

<!-- HTML вывод -->
@if()
```

#### Визуализация JSON

Иногда вы можете передать массив в свое представление с намерением отобразить его как JSON, чтобы инициализировать переменную JavaScript. К примеру:

```blade
<script>
     var app = <?php echo json_encode($array); ?>;
</script>
```

Однако вместо ручного вызова `json_encode` вы можете использовать `Js::from` метод. Метод `from` принимает те же аргументы, что и функция PHP `json_encode`, однако это обеспечит надлежащее экранирование полученного JSON для включения в кавычки HTML. Метод `from` вернет строчный `JSON.parse` оператор JavaScript, который преобразует заданный объект или массив в действительный объект JavaScript:

```blade
<script>
     var app = {{ Js::from($array) }};
</script>
```
> **Внимание**  
> Вы должны использовать только `Js::from` метод воспроизведения существующих переменных как JSON. Шаблон Blade базируется на регулярных выражениях, и попытки передать сложное выражение директиве могут вызвать неожиданные ошибки.

#### Директива `@verbatim`

Если вы отображаете переменные JavaScript в большой части своего шаблона, вы можете завернуть HTML в директиву, `@verbati` mчтобы вам не приходилось добавлять к каждому оператору Blade echo символ `@`:

```blade
@verbatim
     <div class="container">
         Привет, {{$name}}.
     </div>
@endverbatim
```

## Blade Директивы

Помимо наследования шаблонов и отображения данных, Blade также предоставляет удобные ярлыки для типовых управляющих структур PHP, таких как условные операторы и циклы. Эти ярлыки обеспечивают очень четкий, сжатый способ работы с управляющими структурами PHP, оставаясь при этом знакомы своим соответствующим PHP.